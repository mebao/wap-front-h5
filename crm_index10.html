<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>crm</title>

    <!-- Bootstrap -->
    <link href="./vendors/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="./vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <!-- NProgress -->
    <link href="./vendors/nprogress/nprogress.css" rel="stylesheet">
    <!-- FullCalendar -->
    <link href="./vendors/fullcalendar/fullcalendar.min.css" rel="stylesheet">
    <link href="./vendors/fullcalendar/fullcalendar.print.css" rel="stylesheet" media="print">

    <!-- Custom Theme Style -->
    <link href="css/crm.css" rel="stylesheet">
    <link href="css/common.css" rel="stylesheet">
    <link href="css/crmPage.css" rel="stylesheet">
  </head>

  <body class="nav-md">
    <div id="crm" class="container body">
      <div class="main_container">
        <div class="col-md-3 left_col">
          <div class="left_col scroll-view">
            <!-- menu profile quick info -->
            <div class="profile clearfix">
              <div class="profile_pic">
                <img src="images/img.jpg" alt="..." class="img-circle profile_img">
              </div>
              <div class="profile_info">
                <span>Welcome,</span>
                <h2>John Doe</h2>
              </div>
            </div>
            <!-- /menu profile quick info -->

            <br />

            <!-- sidebar menu -->
            <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
                
              <div class="menu_section">
                
              </div>
            </div>
            <!-- /sidebar menu -->
          </div>
        </div>

        <!-- top navigation -->
        <div class="top_nav">
          <div class="nav_menu">
            <nav>
              <div class="nav toggle">
                <a id="menu_toggle"><i class="fa fa-bars"></i></a>
              </div>

              <ul class="nav navbar-nav navbar-right">
                <li class="">
                  <a href="javascript:;" class="user-profile dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                    <img src="images/img.jpg" alt="">John Doe
                    <span class=" fa fa-angle-down"></span>
                  </a>
                  <ul class="dropdown-menu dropdown-usermenu pull-right">
                    <li><a href="javascript:;"> Profile</a></li>
                    <li>
                      <a href="javascript:;">
                        <span class="badge bg-red pull-right">50%</span>
                        <span>Settings</span>
                      </a>
                    </li>
                    <li><a href="javascript:;">Help</a></li>
                    <li><a href="login.html"><i class="fa fa-sign-out pull-right"></i> Log Out</a></li>
                  </ul>
                </li>

                <li role="presentation" class="dropdown">
                  <a href="javascript:;" class="dropdown-toggle info-number" data-toggle="dropdown" aria-expanded="false">
                    <i class="fa fa-envelope-o"></i>
                    <span class="badge bg-green">6</span>
                  </a>
                  <ul id="menu1" class="dropdown-menu list-unstyled msg_list" role="menu">
                    <li>
                      <a>
                        <span class="image"><img src="images/img.jpg" alt="Profile Image" /></span>
                        <span>
                          <span>John Smith</span>
                          <span class="time">3 mins ago</span>
                        </span>
                        <span class="message">
                          Film festivals used to be do-or-die moments for movie makers. They were where...
                        </span>
                      </a>
                    </li>
                    <li>
                      <div class="text-center">
                        <a>
                          <strong>See All Alerts</strong>
                          <i class="fa fa-angle-right"></i>
                        </a>
                      </div>
                    </li>
                  </ul>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <!-- /top navigation -->

        <!-- page content -->
        <div class="right_col home_page" role="main">
          <div class="x_panel">
            <div class="x_title">
              <h2>排班</h2>
              <div class="clearfix"></div>
            </div>
            <div class="x_content">
              <div class="x_panel">
                <div class="x_content">
                  <div class="flex search-tab">
                    <div class="flex-1"></div>
                    <select class="form-control w100p mr10">
                      <option value="">选择科室</option>
                      <option value="1">已收费</option>
                      <option value="2">未收费</option>
                    </select>
                    <select class="form-control w100p mr10">
                      <option value="">选择医生</option>
                      <option value="1">已收费</option>
                      <option value="2">未收费</option>
                    </select>
                    <button type="button" class="btn btn-default"><i class="fa fa-search"></i></button>
                  </div>
                  <div class="mt10">
                    <div class="flex">
                      <div class="w30">
                        <button id="prev" class="btn btn-default">上一周</button>
                        <button id="next" class="btn btn-default">下一周</button>
                        <button id="today" class="btn btn-default">今天</button>
                      </div>
                      <div id="dateInfo" class="w40 text-center"></div>
                      <div class="w30 text-right">
                        <button type="button" class="btn btn-primary">复制上周</button>
                      </div>
                    </div>
                    <table id="infoTab" class="table table-striped table-bordered mb0">
                      
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- /page content -->

        <!-- footer content -->
        <footer>
          <div class="pull-right">
            crm
          </div>
          <div class="clearfix"></div>
        </footer>
        <!-- /footer content -->
      </div>
    </div>

    <!-- jQuery -->
    <script src="./vendors/jquery/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="./vendors/bootstrap/js/bootstrap.min.js"></script>
    <!-- FastClick -->
    <script src="./vendors/fastclick/fastclick.js"></script>
    <!-- NProgress -->
    <script src="./vendors/nprogress/nprogress.js"></script>
    <!-- FullCalendar -->
    <script src="./vendors/moment/moment.min.js"></script>
    <script src="./vendors/fullcalendar/fullcalendar.min.js"></script>

    <!-- Custom Theme Scripts -->
    <script src="js/crm.js"></script>
    <script src="js/main.js"></script>

    <script>
      $(window).load(function() {
        var todayDate = new Date(),
            d = todayDate.getDate(),
            m = todayDate.getMonth(),
            y = todayDate.getFullYear(),
            weekDay = todayDate.getDay(),
            nowDate = new Date();
        $prev = $('#prev');
        $next = $('#next');
        $today = $('#today');
        $prev.click(function(){
          //获取下周同一时间
          nowDate = new Date(nowDate.getTime() - (7 * 24 * 60 * 60 * 1000));
          readyPage(weekDay, nowDate);
        });

        $next.click(function(){
          //获取下周同一时间
          nowDate = new Date(nowDate.getTime() + (7 * 24 * 60 * 60 * 1000));
          readyPage(weekDay, nowDate);
        });

        $today.click(function(){
          //获取下周同一时间
          nowDate = todayDate;
          readyPage(weekDay, todayDate);
        });

        readyPage(weekDay, todayDate);

        function readyPage(weekDay, todayDate){
          var weekArray = getWeekDays(weekDay, todayDate);
          var html = '<thead>\
                        <tr>\
                          <th></th>\
                          <th>人员</th>\
                          <th>周一 ' + getDayByDate(weekArray[0]) + '</th>\
                          <th>周二 ' + getDayByDate(weekArray[1]) + '</th>\
                          <th>周三 ' + getDayByDate(weekArray[2]) + '</th>\
                          <th>周四 ' + getDayByDate(weekArray[3]) + '</th>\
                          <th>周五 ' + getDayByDate(weekArray[4]) + '</th>\
                          <th>周六 ' + getDayByDate(weekArray[5]) + '</th>\
                          <th>周日 ' + getDayByDate(weekArray[6]) + '</th>\
                        </tr>\
                      </thead>\
                      <tbody id="tableData">\
                        <tr>\
                          <td>\
                            <img src="">\
                          </td>\
                          <td>占</td>\
                          <td>\
                            <div class="input-group">\
                              <select class="form-control">\
                                <option value="1">1</option>\
                                <option value="2">2</option>\
                              </select>\
                            </div>\
                          </td>\
                          <td>\
                            <div class="input-group">\
                              <select class="form-control">\
                                <option value="1">1</option>\
                                <option value="2">2</option>\
                              </select>\
                            </div>\
                          </td>\
                          <td>\
                            <div class="input-group">\
                              <select class="form-control">\
                                <option value="1">1</option>\
                                <option value="2">2</option>\
                              </select>\
                            </div>\
                          </td>\
                          <td>\
                            <div class="input-group">\
                              <select class="form-control">\
                                <option value="1">1</option>\
                                <option value="2">2</option>\
                              </select>\
                            </div>\
                          </td>\
                          <td>\
                            <div class="input-group">\
                              <select class="form-control">\
                                <option value="1">1</option>\
                                <option value="2">2</option>\
                              </select>\
                            </div>\
                          </td>\
                          <td>\
                            <div class="input-group">\
                              <select class="form-control">\
                                <option value="1">1</option>\
                                <option value="2">2</option>\
                              </select>\
                            </div>\
                          </td>\
                          <td>\
                            <div class="input-group">\
                              <select class="form-control">\
                                <option value="1">1</option>\
                                <option value="2">2</option>\
                              </select>\
                            </div>\
                          </td>\
                        </tr>\
                        <tr>\
                          <td>\
                            <img src="">\
                          </td>\
                          <td>超级管理员</td>\
                          <td>\
                            <div class="input-group">\
                              <select class="form-control">\
                                <option value="1">1</option>\
                                <option value="2">2</option>\
                              </select>\
                            </div>\
                          </td>\
                          <td>\
                            <div class="input-group">\
                              <select class="form-control">\
                                <option value="1">1</option>\
                                <option value="2">2</option>\
                              </select>\
                            </div>\
                          </td>\
                          <td>\
                            <div class="input-group">\
                              <select class="form-control">\
                                <option value="1">1</option>\
                                <option value="2">2</option>\
                              </select>\
                            </div>\
                          </td>\
                          <td>\
                            <div class="input-group">\
                              <select class="form-control">\
                                <option value="1">1</option>\
                                <option value="2">2</option>\
                              </select>\
                            </div>\
                          </td>\
                          <td>\
                            <div class="input-group">\
                              <select class="form-control">\
                                <option value="1">1</option>\
                                <option value="2">2</option>\
                              </select>\
                            </div>\
                          </td>\
                          <td>\
                            <div class="input-group">\
                              <select class="form-control">\
                                <option value="1">1</option>\
                                <option value="2">2</option>\
                              </select>\
                            </div>\
                          </td>\
                          <td>\
                            <div class="input-group">\
                              <select class="form-control">\
                                <option value="1">1</option>\
                                <option value="2">2</option>\
                              </select>\
                            </div>\
                          </td>\
                        </tr>\
                      </tbody>';
          $('#dateInfo').html(getDayByDate(weekArray[0]) + ' - ' + getDayByDate(weekArray[6]));
          $('#infoTab').html(html);
        }

        //获取本周时间
        function getWeekDays(weekDay, date){
          //获取本周周一时间
          var dateArray = new Array();
          var dateTime = date.getTime();
          var firstDate = new Date(dateTime - ((weekDay - 1) * 24 * 60 * 60 * 1000));
          for(var i = 0; i < 7; i++){
            var nowDate = new Date(firstDate.getTime() + i * 24 * 60 * 60 * 1000);
            dateArray.push(nowDate);
          }
          return dateArray;
        }

        //通过时间或许日期
        function getDayByDate(date){
          var d = date.getDate(),
          m = date.getMonth(),
          y = date.getFullYear();
          return ((m + 1) > 9 ? (m + 1) : ('0' + (m + 1))) + '/' + (d > 9 ? d : ('0' + d));
        }
      });
    </script>
  </body>
</html>
